/*! For license information please see 15.27a6ae61.chunk.js.LICENSE.txt */
(this["webpackJsonpgraviz-telescope"]=this["webpackJsonpgraviz-telescope"]||[]).push([[15],{617:function(e,n,r){"use strict";(function(e,t){r.d(n,"a",(function(){return he})),r.d(n,"b",(function(){return ce})),r.d(n,"c",(function(){return Oe})),r.d(n,"d",(function(){return De}));var o=r(7),a=r(2),i=r.n(a);var s="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};function d(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function c(e,n){return e(n={exports:{}},n.exports),n.exports}for(var u=c((function(e){(function(){var n,r,o,a,i,s;"undefined"!==typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!==typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-i)/1e6},r=t.hrtime,a=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})(),s=1e9*t.uptime(),i=a-s):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(s)})),l="undefined"===typeof window?s:window,h=["moz","webkit"],f="AnimationFrame",p=l["request"+f],m=l["cancel"+f]||l["cancelRequest"+f],b=0;!p&&b<h.length;b++)p=l[h[b]+"Request"+f],m=l[h[b]+"Cancel"+f]||l[h[b]+"CancelRequest"+f];if(!p||!m){var g=0,y=0,E=[];p=function(e){if(0===E.length){var n=u(),r=Math.max(0,16.666666666666668-(n-g));g=r+n,setTimeout((function(){var e=E.slice(0);E.length=0;for(var n=0;n<e.length;n++)if(!e[n].cancelled)try{e[n].callback(g)}catch(r){setTimeout((function(){throw r}),0)}}),Math.round(r))}return E.push({handle:++y,callback:e,cancelled:!1}),y},m=function(e){for(var n=0;n<E.length;n++)E[n].handle===e&&(E[n].cancelled=!0)}}var v=function(e){return p.call(l,e)},w=function(){m.apply(l,arguments)};v.cancel=w,v.polyfill=function(e){e||(e=l),e.requestAnimationFrame=p,e.cancelAnimationFrame=m};var O=function(e){w(e.value)},D=function(e,n){var r=u(),t={};return t.value=v((function o(){u()-r>=n?e.call(null):t.value=v(o)})),t},S=i.a.useCallback,I=i.a.useEffect,C=i.a.useState,R=i.a.useRef,A=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=R(null);function o(){null!==t.current&&(O(t.current),t.current=null)}return I((function(){return o}),[e,n]),S((function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];var s=this;null===t.current&&r?e.apply(s,a):null!==t.current&&O(t.current),t.current=D((function(){t.current=null,!r&&e.apply(s,a)}),n)}),[e,n])},T=function(e,n,r){var t=C(e),o=t[1];return[t[0],A(o,n,r)]},x=i.a.useEffect,k=[],_={},N=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_,t=r.wait,a=r.leading,i=T("undefined"===typeof document?n:document.documentElement[e],t,a),s=Object(o.a)(i,2),d=s[0],c=s[1];function u(){return c(document.documentElement[e])}return x((function(){var e=u;return window.addEventListener("resize",e),window.addEventListener("orientationchange",e),function(){window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}}),k),d},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return N("clientHeight",e,n)},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return N("clientWidth",e,n)},L=c((function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"===typeof Symbol&&Symbol.for,t=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,d=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,l=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,b=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.fundamental"):60117,y=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function v(e){if("object"===typeof e&&null!==e){var n=e.$$typeof;switch(n){case t:switch(e=e.type){case u:case l:case a:case s:case i:case f:return e;default:switch(e=e&&e.$$typeof){case c:case h:case b:case m:case d:return e;default:return n}}case o:return n}}}function w(e){return v(e)===l}n.typeOf=v,n.AsyncMode=u,n.ConcurrentMode=l,n.ContextConsumer=c,n.ContextProvider=d,n.Element=t,n.ForwardRef=h,n.Fragment=a,n.Lazy=b,n.Memo=m,n.Portal=o,n.Profiler=s,n.StrictMode=i,n.Suspense=f,n.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===l||e===s||e===i||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===m||e.$$typeof===d||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===y||e.$$typeof===E)},n.isAsyncMode=function(e){return w(e)||v(e)===u},n.isConcurrentMode=w,n.isContextConsumer=function(e){return v(e)===c},n.isContextProvider=function(e){return v(e)===d},n.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===t},n.isForwardRef=function(e){return v(e)===h},n.isFragment=function(e){return v(e)===a},n.isLazy=function(e){return v(e)===b},n.isMemo=function(e){return v(e)===m},n.isPortal=function(e){return v(e)===o},n.isProfiler=function(e){return v(e)===s},n.isStrictMode=function(e){return v(e)===i},n.isSuspense=function(e){return v(e)===f}}));d(L);L.typeOf,L.AsyncMode,L.ConcurrentMode,L.ContextConsumer,L.ContextProvider,L.Element,L.ForwardRef,L.Fragment,L.Lazy,L.Memo,L.Portal,L.Profiler,L.StrictMode,L.Suspense,L.isValidElementType,L.isAsyncMode,L.isConcurrentMode,L.isContextConsumer,L.isContextProvider,L.isElement,L.isForwardRef,L.isFragment,L.isLazy,L.isMemo,L.isPortal,L.isProfiler,L.isStrictMode,L.isSuspense;var P=c((function(e,n){0}));d(P);P.typeOf,P.AsyncMode,P.ConcurrentMode,P.ContextConsumer,P.ContextProvider,P.Element,P.ForwardRef,P.Fragment,P.Lazy,P.Memo,P.Portal,P.Profiler,P.StrictMode,P.Suspense,P.isValidElementType,P.isAsyncMode,P.isConcurrentMode,P.isContextConsumer,P.isContextProvider,P.isElement,P.isForwardRef,P.isFragment,P.isLazy,P.isMemo,P.isPortal,P.isProfiler,P.isStrictMode,P.isSuspense,c((function(e){e.exports=L}));var F=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;function W(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},r=0;r<10;r++)n["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(n).map((function(e){return n[e]})).join(""))return!1;var t={};return"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},t)).join("")}catch(o){return!1}})()&&Object.assign;var z="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function $(e,n,r,t,o){}$.resetWarningCache=function(){0};Function.call.bind(Object.prototype.hasOwnProperty);function U(){}function q(){}q.resetWarningCache=U;for(var V=c((function(e){e.exports=function(){function e(e,n,r,t,o,a){if(a!==z){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function n(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:q,resetWarningCache:U};return r.PropTypes=r,r}()})),X=c((function(e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var t=new Array(16);e.exports=function(){for(var e,n=0;n<16;n++)0===(3&n)&&(e=4294967296*Math.random()),t[n]=e>>>((3&n)<<3)&255;return t}}})),G=[],K=0;K<256;++K)G[K]=(K+256).toString(16).substr(1);var Z=function(e,n){var r=n||0,t=G;return[t[e[r++]],t[e[r++]],t[e[r++]],t[e[r++]],"-",t[e[r++]],t[e[r++]],"-",t[e[r++]],t[e[r++]],"-",t[e[r++]],t[e[r++]],"-",t[e[r++]],t[e[r++]],t[e[r++]],t[e[r++]],t[e[r++]],t[e[r++]]].join("")};var J=function(e,n,r){var t=n&&r||0;"string"==typeof e&&(n="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||X)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n)for(var a=0;a<16;++a)n[t+a]=o[a];return n||Z(o)};!function(e){if(e&&"undefined"!==typeof window){var n=document.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=e,document.head.appendChild(n)}}(".dashboard-container {\n  position: relative;\n  width: 100%;\n}\n\n.cio-embed-dashboard {\n  background: transparent;\n  padding: 0;\n  border: 0;\n}\n\n.cio-container-loader {\n  width: 100%;\n  position: relative;\n}\n\n.cio-lc {\n  margin: 0 auto;\n}\n\n.cio-lm {\n  width: 100%;\n  height: 20px;\n  text-align: center;\n  margin-bottom: 16px;\n  font-family: Helvetica, Arial, sans-serif;\n  font-size: 14px;\n}\n\n.cio-pl {\n  box-sizing: border-box;\n  margin: 16px auto;\n  position: relative;\n  text-indent: -9999em;\n  animation: spin 0.6s infinite linear;\n}\n\n.cio-pl,\n.cio-pl:after {\n  border-radius: 50%;\n  width: 32px;\n  height: 32px;\n}\n\n.chartEmbedding:after {\n  width: 24px;\n  height: 24px;\n}\n\n@-webkit-keyframes spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@keyframes spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.cio-error {\n  background: transparent;\n  padding: 48px 0;\n  margin: 0 auto;\n  width: 80%;\n  border: 0;\n  text-align: center;\n  min-height: 192px;\n}\n\n.cio-loader {\n  top: 0;\n  left: 0;\n  width: 100%;\n  min-height: 400px;\n  position: absolute;\n  z-index: 10000;\n  transition-duration: 0.3s;\n}");var Y,Q,ee=function(e){if(!e)return"about:blank";var n=e.replace(/[^\x20-\x7E]/gim,"").trim();if(!ne(n))return n;var r=n.match(/^([^:]+):/gm);if(!r)return n;var t=r[0];return/^(%20|\s)*(javascript|data)/im.test(t)?"about:blank":n},ne=function(e){return new RegExp("^(?:[a-z]+:)?//","i").test(e)},re=function(){function e(e,n){this.appServer="https://app.cumul.io/",this.host="https://api.cumul.io",this.port="443",this.version="0.1.0",this.language="auto",this.chartDimensions={width:"auto",height:"auto"},this.loaded=!1,this.loader={background:"#f9f9f9",fontColor:"#5a5a5a",spinnerColor:"rgba(255, 165, 0, 0.7)",spinnerBackground:"rgba(169, 169, 169, 0.14)",logoColor:"orange"},this._id=J(),this.dashboardId=e,this.container=n}return e.prototype.extendWithComponentProps=function(e){for(var n in this.loader={background:e.loaderBackground?e.loaderBackground:this.loader.background,fontColor:e.loaderFontColor?e.loaderFontColor:this.loader.fontColor,spinnerColor:e.loaderSpinnerColor?e.loaderSpinnerColor:this.loader.spinnerColor,spinnerBackground:e.loaderSpinnerBackground?e.loaderSpinnerBackground:this.loader.spinnerBackground,logoColor:e.loaderLogoColor?e.loaderLogoColor:this.loader.logoColor},e)this[n]=e[n]},Object.defineProperty(e.prototype,"chartEmbedding",{get:function(){return!!this.chartId},enumerable:!0,configurable:!0}),e.prototype.getIframeUrl=function(e){return function(e,n){var r=e.language,t=e.loader,o=e.screenmode,a=e.authKey,i=e.authToken,s=e.chartDimensions,d=e.version,c=e.dashboardId,u=e.chartId,l=e.chartEmbedding,h={},f=e.appServer?e.appServer:"";"auto"!==r&&(h.language=r),t&&(t.background&&(h.ldrbg=t.background.replace("#","--")),t.fontColor&&(h.ldrftclr=t.fontColor.replace("#","--")),t.spinnerColor&&(h.ldrspclr=t.spinnerColor.replace("#","--")),t.spinnerBackground&&(h.ldrspbg=t.spinnerBackground.replace("#","--")),t.logoColor&&(h.ldrlgclr=t.logoColor.replace("#","--"))),o&&["mobile","tablet","desktop","largescreen","fixed"].indexOf(o)>-1&&o===n&&(h.screenmode=n),a&&i&&(h.key=a,h.token=i),l&&s&&(s.width&&(h.width=s.width),s.height&&(h.height=s.height)),h.version="react"+d;var p=Object.keys(h).map((function(e){return e+"="+encodeURIComponent(h[e])})).join("&"),m="";return m=l?f+"i/"+c+"/"+u+(0===p.length?"":"?"+p):f+"i/"+c+(0===p.length?"":"?"+p),ee(m)}(this,e)},e}();!function(e){e.MOBILE="mobile",e.TABLET="tablet",e.DESKTOP="desktop",e.LARGE_SCREEN="largeScreen",e.FIXED="fixed",e.AUTO="auto"}(Q||(Q={}));var te,oe=((Y={})[Q.MOBILE]=[150,767],Y[Q.TABLET]=[768,1199],Y[Q.DESKTOP]=[1200,1599],Y[Q.LARGE_SCREEN]=[1600,9999],Y[Q.FIXED]=[],Y);!function(e){e.INIT="init",e.CHANGED_FILTERS="changedFilters",e.DATA="data",e.LOAD="load",e.ERROR="error",e.EXPORT="export"}(te||(te={}));var ae,ie={initializing:{en:"Initializing...",nl:"Laden...",fr:"Chargement..."},errorDashboard:{en:"Oops, we could not load this dashboard!",nl:"Oeps, we konden het dashboard niet laden.",fr:"Le chargement a echou\xe9."},errorChart:{en:"Oops, we could not load this chart!",nl:"Oeps, we konden de grafiek niet laden.",fr:"Le chargement a echou\xe9."}};!function(e){e.VALIDATE_DASHBOARD="VALIDATE_DASHBOARD",e.SET_CURRENT_SCREEN_MODE="SET_CURRENT_SCREEN_MODE",e.SET_CONTAINER_WIDTH="SET_CONTAINER_WIDTH",e.GET_DATA="GET_DATA",e.SET_AUTHORIZATION="SET_AUTHORIZATION",e.REFRESH_DATA="REFRESH_DATA",e.EXPORT_DASHBOARD="EXPORT_DASHBOARD",e.RELOAD_DASHBOARD="RELOAD_DASHBOARD",e.CHECK_BROWSER="CHECK_BROWSER",e.CALCULATE_DIMENSIONS="CALCULATE_DIMENSIONS",e.INIT="INIT",e.CHANGE_FILTERS="CHANGE_FILTERS",e.DATA="DATA",e.LOAD="LOAD",e.ERROR="ERROR",e.EXPORT="EXPORT"}(ae||(ae={}));var se=function(e){return{type:ae.LOAD,payload:e}},de=function(e){return{type:ae.SET_CONTAINER_WIDTH,payload:e}},ce=Object(a.createContext)(null);function ue(){var e=Object(a.useContext)(ce);if(!e)throw new Error("useCumulio must be used within a CumulioProvider");return e}var le=function(){var n=ue(),r=(n.state,n.dispatch);!function(n,r,t){void 0===t&&(t=e);var o=Object(a.useRef)();Object(a.useEffect)((function(){o.current=r}),[r]),Object(a.useEffect)((function(){if(t&&t.addEventListener){var e=function(e){return o.current(e)};return t.addEventListener(n,e),function(){t.removeEventListener(n,e)}}}),[n,t])}("message",(function(e){var n,t=e.data;if(t)switch(t.type){case te.INIT:r((n={replaceOldDashboards:!0},{type:ae.INIT,payload:n}));break;case te.CHANGED_FILTERS:var o=t.filters.filter((function(e){return-1===["itemFilter","global"].indexOf(e.properties.origin)}));r(function(e){return{type:ae.CHANGE_FILTERS,payload:e}}({dashboardId:t.dashboard,filters:o}));break;case te.DATA:r(function(e){return{type:ae.DATA,payload:e}}({rawData:t.data}));break;case te.LOAD:r(se({dashboardId:t.dashboard,dimensions:t.dimensions,language:t.language}));break;case te.ERROR:r(se({dashboardId:t.dashboard,dimensions:t.dimensions,language:t.language})),r(function(e){return{type:ae.ERROR,payload:e}}({dashboardId:t.dashboard}));break;case te.EXPORT:r(se({dashboardId:t.dashboard,dimensions:t.dimensions,language:t.language})),r(function(e){return{type:ae.EXPORT,payload:e}}({dashboardId:t.dashboard,error:t.error?t.error:null}))}}))},he=function(e){var n,r,t,o=e.switchScreenModeOnResize,s=Object(a.useRef)(null),d=[j(n,t),M(r,t)],c=d[0],u=d[1],l=Object(a.useState)(null),h=l[0],f=l[1],p={borderWidth:3,loaderSize:32,minHeight:400};le();var m=Object(a.useState)(""),b=m[0],g=m[1],y=ue(),E=y.state,v=y.dispatch,w="dashboard-"+J(),O=J(),D="cio-dashboard-"+O,S=fe(e,w),I=E.error,C=E.dashboards.find((function(e){return e.dashboardId===S.dashboardId}));C&&(S=C);var R=S.chartEmbedding,A=S.loader,T=S.loaded,x=S.chartDimensions;Object(a.useEffect)((function(){var e;v({type:ae.CHECK_BROWSER}),v((e={dashboard:S},{type:ae.VALIDATE_DASHBOARD,payload:e})),N(),f(S.getIframeUrl(E.currentScreenmode)),v(de({width:s.current.offsetWidth})),_()}),[e.dashboardId]);var k=Object(a.useRef)(!0);Object(a.useEffect)((function(){var e;(v(de({width:s.current.offsetWidth})),o&&_(),k.current)?k.current=!1:v((e={dashboard:S,dimensions:S.dimensions,currentScreenmode:E.currentScreenmode},{type:ae.CALCULATE_DIMENSIONS,payload:e}))}),[c,u]),Object(a.useEffect)((function(){if(void 0!==S.iframeDimensions)for(var e=0,n=document.getElementsByClassName("cio-embed-dashboard");e<n.length;e++){var r=n[e];r.src.includes(S.dashboardId)&&(r.style.height=S.iframeDimensions.height,r.style.width=S.iframeDimensions.width)}}),[S.iframeDimensions]),I&&pe(I,S);var _=function(){Object.keys(oe).forEach((function(e){var n,r=oe[e];r[0]<=c&&c<=r[1]&&v((n={mode:e},{type:ae.SET_CURRENT_SCREEN_MODE,payload:n}))}))},N=function(){var e="";e=S.language in Object.keys(ie.initializing)?ie.initializing[S.language]:ie.initializing.en,g(e)};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:w,className:"dashboard-container",style:function(){if(A.background)return{background:S.loader.background}}(),ref:s},!I&&i.a.createElement("div",{className:"cio-container-loader",id:"cio-container-loader-"+O,style:function(){var e=R&&"auto"!==x.height;return{display:T?"none":"",height:(e?x.height:p.minHeight)+"px"}}()},i.a.createElement("div",{className:"cio-loader",id:"cio-loader-"+O,style:function(){if(R){p={borderWidth:4,loaderSize:24,minHeight:200};var e="auto"!==x.width,n="auto"!==x.height;return{background:A.background,height:(n?x.height:"200")+"px",minHeight:n?"":"200px",width:e?x.width+"px;":"100%"}}return{background:A.background}}()},i.a.createElement("div",{className:"cio-lc",style:function(){var e=S.chartId,n=R&&"auto"!==x.height,r=16;return{padding:(r+=e?n?(parseInt(x.height,10)-p.loaderSize-32)/2:(p.minHeight-p.loaderSize-32)/2:128)+"px"}}()},i.a.createElement("div",{className:"cio-pl"+(R?" chartEmbedding":""),style:{borderBottom:p.borderWidth+"px solid "+A.spinnerBackground,borderLeft:p.borderWidth+"px solid "+A.spinnerBackground,borderRight:p.borderWidth+"px solid "+A.spinnerColor,borderTop:p.borderWidth+"px solid "+A.spinnerColor,height:p.loaderSize+"px",width:p.loaderSize+"px"}}),!R&&i.a.createElement("div",{className:"cio-lm",style:{color:A.fontColor}},b)))),i.a.createElement("iframe",{className:"cio-embed-dashboard",id:D,name:D,src:h,style:function(){var e={opacity:0,height:"400px"};return R&&("auto"!==x.height?e.height=x.height+"px":e.height="200px","auto"!==x.width?e.width=x.width+"px":e.width="100%"),T&&(e.opacity=1),I&&(e.width="100%",e.height="400px"),e}()})),I&&I.displayableMessage&&i.a.createElement("div",{id:"cio-error-"+O},i.a.createElement("h3",{className:"cio-error"},I.displayableMessage)))},fe=function(e,n){var r=new re(e.dashboardId,"#"+n);return r.extendWithComponentProps(e),r},pe=function(e,n){var r="The dashboard encountered an error";"string"===n.dashboardId&&(r+=" for dashboard with id "+n.dashboardId),"string"===n.container&&(r+=" in container "+n.container),e&&e.message&&(r+=":\n"+e.message),e&&console.error(r)};he.defaultProps={language:"auto",screenmode:Q.AUTO,switchScreenmodeOnResize:!0},he.propTypes={screenmode:V.oneOf(Object.values(Q))};var me=function(){return(me=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},be=function(e,n){var r=n.dashboard,t=n.status;return r.status=t,me(me({},e),{filters:[],dashboards:e.dashboards.map((function(e){return e.dashboardId===r.dashboardId?r:e}))})},ge=function(e,n){var r,t,o,a=n.dashboard,i=n.currentScreenmode,s=n.dimensions,d=e.containerWidth;if(!a.chartDimensions||!s)throw new Error("No valid dimensions given for dashboard "+a.dashboardId);a.dimensions=s;!a.switchScreenmodeOnResize&&i&&(a.screenmode=i);var c=[];if(Object.keys(s)&&Object.keys(s)[0]===Q.FIXED)o=Q.FIXED,r=s.fixed[0],t=s.fixed[1];else{if(a.chartEmbedding&&(s=ye(s)),-1===(c=Ee(s)).map((function(e){return e.mode})).indexOf(a.screenmode)&&(a.screenmode=Q.AUTO),a.screenmode===Q.AUTO)c.forEach((function(e){var n;n=e,a.chartEmbedding&&"auto"!==a.chartDimensions.width&&"auto"===a.chartDimensions.height?n.width[0]<parseInt(a.chartDimensions.width)&&(o=n.mode,r=parseInt(a.chartDimensions.width,10),t=s[o][1]):n.width[0]<d&&(o=n.mode,a.chartEmbedding?(r=a.chartDimensions&&a.chartDimensions.width&&"auto"!==a.chartDimensions.width?parseInt(a.chartDimensions.width,10):Math.min(d,n.width[1]),t=a.chartDimensions&&a.chartDimensions.height&&"auto"!==a.chartDimensions.height?parseInt(a.chartDimensions.height,10):s[o][1],a.chartDimensions&&"auto"!==a.chartDimensions.width&&"auto"===a.chartDimensions.height&&(r=parseInt(a.chartDimensions.width,10),t=s[o][1])):(r=Math.max(Math.min(n.width[1],d),n.width[0]),t=n.height))}));else{var u=c.find((function(e){return e.mode===a.screenmode}));o=a.screenmode,r=Math.max(Math.min(u.width[1],d),u.width[0]),t=u.height,a.chartEmbedding&&(a.chartDimensions&&a.chartDimensions.width&&"auto"!==a.chartDimensions.width&&(r=parseInt(a.chartDimensions.width,10)),a.chartDimensions&&a.chartDimensions.height&&"auto"!==a.chartDimensions.height&&(t=parseInt(a.chartDimensions.height,10)))}o||0===c.length||(o=c[0].mode,r=c[0].width[0],t=c[0].height)}var l=t+"px",h=r+"px";return a.chartEmbedding&&a.chartDimensions&&(h=a.chartDimensions.width+"px",l=a.chartDimensions.height+"px"),a.loaded=!0,a.iframeDimensions={width:h,height:l},e=be(e,{dashboard:a,status:"loaded"}),me(me({},e),{currentScreenmode:o,dashboards:e.dashboards.map((function(e){return e.dashboardId===a.dashboardId?a:e}))})},ye=function(e){var n=Object.keys(e)[0];return Object.values(Q).forEach((function(r){["fixed","auto"].includes(r)||(r in Object.keys(e)?n=r:e[r]=e[n])})),e},Ee=function(e){return Object.keys(e).map((function(n){var r={width:[],height:[],mode:n};return Object.values(Q).includes(n)&&(Object.keys(oe).forEach((function(e){e===n&&(r.width=oe[e])})),r.height=e[n][1]||50),r}))},ve=function(e){var n=[],r=document.getElementsByClassName("cio-embed-dashboard");if(e.container){var t=document.querySelector("."+e.container);if(!t)throw new Error("Container cannot be found with class selector "+e.container);for(var o=0,a=t.children;o<a.length;o++)for(var i=0,s=r=a[o].getElementsByClassName("cio-embed-dashboard");i<s.length;i++){var d=s[i];e.dashboardId?d.src.includes(e.dashboardId)&&n.push(d):n.push(d)}}else for(var c=0,u=r;c<u.length;c++){d=u[c];e.dashboardId?d&&d.src.includes(e.dashboardId)&&n.push(d):n.push(d)}return n},we=function e(n){for(var r in n)null!==n[r]&&void 0!==n[r]||delete n[r],"object"===typeof n[r]&&(n[r]=e(n[r]));return n},Oe={dashboards:[],filters:[],data:[],containerWidth:null,replaceOldDashboards:!1,debug:!1};function De(e,n){try{switch(n.type){case ae.VALIDATE_DASHBOARD:return function(e,n){var r=we(n),t=(r.screenmode,r.chartDimensions);r.switchScreenmodeOnResize,"auto"!==t.width&&(t.width=(t.width+"").replace("px","")||"auto"),"auto"!==t.height&&(t.height=(t.height+"").replace("px","")||"auto");var o=Object.assign({},e),a=!1;return o.dashboards&&o.dashboards.forEach((function(e){r.dashboardId===e.dashboardId&&(e=r,a=!0)})),a||(!0===o.replaceOldDashboards&&(o.dashboards=[],o.replaceOldDashboards=!1),o.dashboards.push(r)),o}(e,n.payload.dashboard);case ae.CHECK_BROWSER:return function(e){var n={svg:!1,flexbox:!1,postMessage:!1};n.svg=!(!("createElementNS"in document)||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect);var r=(document.body||document.documentElement).style;n.flexbox=!!("flexWrap"in r)||"WebkitFlexWrap"in r||"msFlexWrap"in r,n.postMessage=!!window.postMessage;var t=["svg","flexbox","postMessage"].reduce((function(e,r){return n[r]||(e+="Your browser does not support: "+r+"\n"),e}),"");return!t||e.debug?e:me(me({},e),{error:{message:t,displayableMessage:"Browser not supported"}})}(e);case ae.SET_CURRENT_SCREEN_MODE:return me(me({},e),{currentScreenmode:n.payload.mode});case ae.SET_CONTAINER_WIDTH:return me(me({},e),{containerWidth:n.payload.width});case ae.INIT:return me(me({},e),{replaceOldDashboards:n.payload.replaceOldDashboards});case ae.CALCULATE_DIMENSIONS:return ge(e,n.payload);case ae.CHANGE_FILTERS:return function(e,n){var r=n.dashboardId,t=n.filters,o=function(e){return e.map((function(e){return function(e){var n={};switch(n=e.parameters?{columnId:e.parameters[0].column_id,value:e.parameters[1]}:{columnId:e.column_id,value:e.value},e.expression){case"? between ?":n.expression="between";break;case"? > ?":n.expression="greater than";break;case"? >= ?":n.expression="greater than or equal";break;case"? <= ?":n.expression="smaller than or equal";break;case"? < ?":n.expression="smaller than";break;case"? in ?":n.expression="is in";break;case"? = ?":n.expression="equals";break;default:n.expression="equals"}return n}(e)}))}(t),a=Object.assign({},e),i=a.filters.findIndex((function(e){return e.dashboardId===r}));return 0===t.length?(a.filters.splice(i,1),a):(i>-1?a.filters[i].activeFilters=o:a.filters.push({activeFilters:o,dashboardId:r}),a)}(e,n.payload);case ae.DATA:return function(e,n){var r=n.rawData,t=[];return r.forEach((function(e){var n=[];e.forEach((function(e){"object"===typeof e?n.push(e.id):n.push(e)})),t.push(n)})),me(me({},e),{data:t})}(e,n.payload);case ae.LOAD:return function(e,n){var r=n.dashboardId,t=n.dimensions,o=e.dashboards.find((function(e){return e.dashboardId===r}));if(!t)return e;try{return ge(e,{dashboard:o,currentScreenmode:e.currentScreenmode,dimensions:t})}catch(a){return o?(o.loaded=!0,me(me({},e),{error:{message:a.message},dashboards:e.dashboards.map((function(e){return e.dashboardId===o.dashboardId?o:e}))})):e}}(e,n.payload);case ae.ERROR:return function(e,n){var r=n.dashboardId,t=e.dashboards.find((function(e){return e.dashboardId===r}));return be(e,{dashboard:t,status:"error"})}(e,n.payload);case ae.EXPORT:return function(e,n){var r=n.dashboardId,t=n.error,o=e.dashboards.find((function(e){return e.dashboardId===r}));return e=be(e,{dashboard:o,status:"export"}),t&&console.error(t.msg),e}(e,n.payload);case ae.GET_DATA:return function(e,n){var r=n.chartId,t=n.dashboard;return ve(t).forEach((function(e){e.contentWindow.postMessage({action:"getData",id:r},"*")})),e}(e,n.payload);case ae.SET_AUTHORIZATION:return function(e,n){var r=n.authKey,t=n.authToken,o=n.dashboard;return ve(o).forEach((function(e){o.dashboardId?e.contentWindow.postMessage({action:"setAuthorization",key:r,token:t,dashboardId:o.dashboardId},"*"):e.contentWindow.postMessage({action:"setAuthorization",key:r,token:t},"*")})),e}(e,n.payload);case ae.REFRESH_DATA:return function(e,n){for(var r=n.id,t=0,o=document.getElementsByClassName("cio-embed-dashboard");t<o.length;t++)o[t].contentWindow.postMessage({action:"refreshData",id:r||null},"*");return e}(e,n.payload);case ae.EXPORT_DASHBOARD:return function(e,n){var r=n.container,t=n.format,o=void 0===t?"png":t,a=ve({container:r});return 0===a.length&&console.warn("Export error: Could not retrieve the dashboard or the container."),a.forEach((function(n){var r=e.dashboards.find((function(e){return n.src.includes(e.dashboardId)}));if(n.contentWindow.postMessage({action:"exportDashboard",format:o},"*"),r){var t="Exporting dashboard ";r.dashboardId&&(t+=r.dashboardId),r.chartId&&(t=t+" - chart: "+r.chartId),r.container&&(t=t+" in container "+r.container),console.log(t)}else console.log("Export error: Wait until dashboard is rendered.")})),e}(e,n.payload);case ae.RELOAD_DASHBOARD:return function(e){for(var n=0,r=document.getElementsByClassName("cio-embed-dashboard");n<r.length;n++)r[n].contentWindow.postMessage({action:"refreshData"},"*");return e}(e);default:throw new Error}}catch(r){return me(me({},e),{error:{message:r.message}})}}}).call(this,r(71),r(180))}}]);
//# sourceMappingURL=15.27a6ae61.chunk.js.map