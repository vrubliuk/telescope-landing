{"version":3,"sources":["features/widgets/widgets.ts","features/subscriptionPlans/SubscriptionPlanTile.tsx","features/subscriptionPlans/SubscriptionPlanTile.module.scss","features/subscriptionPlans/SubscriptionPlansPage.module.scss","features/subscriptionPlans/SubscriptionPlansPage.tsx"],"names":["widgets","ids","entities","competitiveness","id","name","description","icon","image","relatedWidgetIds","attitude","awareness","funnel","SubscriptionPlanTile","className","style","prices","pricesBilledAnually","searchesLimit","dashboardsLimit","marketsLimit","company","availableWidgets","status","clickHandler","features","label","value","membersLimit","adminsLimit","widgetNames","useMemo","reduce","acc","widget","widgetName","push","styles","subscriptionPlanTile","title","price","formatToCurrency","gbp","sek","priceBilledAnually","map","i","feature","bottom","textTransform","button","onClick","module","exports","connect","user","isUserAdmin","Boolean","members","find","isAdmin","userSubscriptionPlanIds","subscriptionPlanIds","requestCompanySubscriptionPlanUpgrade","actions","setIsGlobalPreloaderShown","useContext","context","subscriptionPlansStatus","useSelector","state","subscriptionPlans","selectAllSubscriptionPlans","dispatch","useDispatch","isFirstLoading","useRef","handleClickSubscriptionPlan","a","notify","show","console","dir","useEffect","current","fetchAllSubscriptionPlans","modifier","subscriptionPlansPage","tiles","subscriptionPlan","tile","requested","undefined","key","enterpriseTile"],"mappings":"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","file":"static/js/7.1d1a7fa3.chunk.js","sourcesContent":["import * as icons from \"../../assets/icons\";\nimport images from \"../../components/Image/images\";\n\ntype Widget = {\n  id: string;\n  name: string;\n  description: string;\n  icon: keyof typeof icons;\n  image: keyof typeof images;\n  relatedWidgetIds: string[];\n};\n\ntype Widgets = {\n  readonly ids: Widget[\"id\"][];\n  entities: {\n    [id: string]: Widget;\n  };\n};\n\nconst widgets: Widgets = {\n  ids: [\n    \"data robustness score\", // won't be shown\n    \"competitiveness\",\n    \"share of search\",\n    \"share of earned media\",\n    \"attitude\",\n    \"sentiment drivers\",\n    \"business drivers\",\n    \"general attributes\",\n    \"position vs competition\",\n    \"key areas\",\n    \"awareness\",\n    \"reputation index\",\n    \"reputation sentiment\",\n    \"reputation distribution\",\n    \"esg index\",\n    \"esg sentiment\",\n    \"esg distribution\",\n    \"funnel\",\n  ],\n  entities: {\n    competitiveness: {\n      id: \"competitiveness\",\n      name: \"Competitiveness\",\n      description:\n        \"Your Competitiveness score shows you if you are creating demand from the market. This curve shows your search volume weighted with sentiment of the search. Baseline 0 shows your industry average and in order to gain market share you are recommended to stay above 0.\",\n      icon: \"Competitiveness\",\n      image: \"lineChartWidget\",\n      relatedWidgetIds: [\"share of search\", \"share of earned media\"],\n    },\n    \"share of search\": {\n      id: \"share of search\",\n      name: \"Share of search\",\n      description:\n        \"Your Share of Search shows how much interest you are generating in comparison to your competitors. Marketing academia together with Google have correlated share of search with market share.\",\n      icon: \"ShareOfSearch\",\n      image: \"timeLineWidget\",\n      relatedWidgetIds: [\"competitiveness\", \"share of earned media\"],\n    },\n    \"share of earned media\": {\n      id: \"share of earned media\",\n      name: \"Share of earned media\",\n      description:\n        \"Your share of Earned Media shows you how much talk you are generating in comparison to your competitors. This indicates the creativity of your marketing communications and the ability to create an emotional response from the market. Creating emotion is key to long term brand building, however if the sentiment is negative it could indicate a crisis (look at your sentiment in the “Emotions” section).\",\n      icon: \"ShareOfEarnedMedia\",\n      image: \"shareOfEarnedMediaPieChart\",\n      relatedWidgetIds: [\"share of search\", \"share of earned media\"],\n    },\n\n    attitude: {\n      id: \"attitude\",\n      name: \"Attitude\",\n      description:\n        \"In what tone is the market talking about your brand? Is your marketing having an impact on the market's sentiment towards you? Look at how your score differs from your competitors.\",\n      icon: \"Attitude\",\n      image: \"competitorsPieWidget\",\n      relatedWidgetIds: [\"sentiment drivers\", \"business drivers\"],\n    },\n    \"sentiment drivers\": {\n      id: \"sentiment drivers\",\n      name: \"Top sentiment drivers\",\n      description:\n        \"The top sentiment drivers show what topics are most frequently being discussed when talking about you in a negative or positive way. Look into what these topics are to get insights into customer pain points and what they are happy with.\",\n      icon: \"SentimentDrivers\",\n      image: \"sentimentDriversPositive\",\n      relatedWidgetIds: [\"attitude\", \"business drivers\"],\n    },\n    \"business drivers\": {\n      id: \"business drivers\",\n      name: \"Business drivers\",\n      description:\n        \"The business drivers are built on the 7 P’s of marketing which breaks down a brand into its key components. Here we show you a holistic view of why customers are choosing your brand over your competitors.\",\n      icon: \"BusinessDrivers\",\n      image: \"reputationDestributionBar\",\n      relatedWidgetIds: [\"attitude\", \"sentiment drivers\"],\n    },\n\n    \"general attributes\": {\n      id: \"general attributes\",\n      name: \"Associated words\",\n      description:\n        \"Associated words show the words most associated with you and your competitors, and how strong you are compared to competitors in regards to those attributes.\",\n      icon: \"AssociatedWords\",\n      image: \"associatedWordsWidget\",\n      relatedWidgetIds: [\"position vs competition\", \"key areas\"],\n    },\n    \"position vs competition\": {\n      id: \"position vs competition\",\n      name: \"Business driver positioning\",\n      description:\n        \"Position vs Competition shows what your strongest area is compared to your competitors based on the 7 P’s of marketing.\",\n      icon: \"BusinessDriverPositioning\",\n      image: \"positionVScompetitionWidget\",\n      relatedWidgetIds: [\"general attributes\", \"key areas\"],\n    },\n    \"key areas\": {\n      id: \"key areas\",\n      name: \"Key business drivers\",\n      description:\n        \"Key Areas shows a recommendation on what business drivers are most active in driving your market share today and what has the biggest impact to impact it positively in the future. This is a predictive analysis based on a regression analysis of what P’s have affected your brand most historically in order to forecast the future.\",\n      icon: \"KeyBusinessDrivers\",\n      image: \"newKeyAreas\",\n      relatedWidgetIds: [\"general attributes\", \"position vs competition\"],\n    },\n\n    awareness: {\n      id: \"awareness\",\n      name: \"Awareness\",\n      description:\n        \"This overview shows the awareness of your brand taking into consideration the biggest competitors in your segment.\",\n      icon: \"Awareness\",\n      image: \"awarenessPieCharts\",\n      relatedWidgetIds: [],\n    },\n\n    \"reputation index\": {\n      id: \"reputation index\",\n      name: \"Reputation index\",\n      description:\n        \"Using Harvard Business School’s parameters defining reputation this indicator identifies whether a company and therefore it’s management, is considered to have a good or bad reputation. This is a compound indicator index where the weight of the parameters is automatically set by monitoring the regional and social importance of multiple topics. The values range between +100 and -100 where a positive score means an overall good reputation and negative means a downward trend in your reputation.\",\n      icon: \"Competitiveness\",\n      image: \"reputationIndexLinechart\",\n      relatedWidgetIds: [\"reputation sentiment\", \"reputation distribution\"],\n    },\n    \"reputation sentiment\": {\n      id: \"reputation sentiment\",\n      name: \"Reputation sentiment\",\n      description:\n        \"The Reputation sentiment metric is an analysis of whether people have a positive, neutral or negative attitude towards your company divided in 6 parameters.\",\n      icon: \"Reputation\",\n      image: \"reputationSentimentLinechart\",\n      relatedWidgetIds: [\"reputation index\", \"reputation distribution\"],\n    },\n    \"reputation distribution\": {\n      id: \"reputation distribution\",\n      name: \"Reputation distribution\",\n      description:\n        \"This framework looks at six parameters that drive the reputation for your company. The Graph shows what parameters that are the most talked-about online for your company’ in regards to your reputation.\",\n      icon: \"BusinessDrivers\",\n      image: \"reputationDestributionBar\",\n      relatedWidgetIds: [\"reputation sentiment\", \"reputation sentiment\"],\n    },\n\n    \"esg index\": {\n      id: \"esg index\",\n      name: \"Esg index\",\n      description:\n        \"The ESG this indicator identifies whether a company is considered to have a good or bad ESG. This is a compound indicator index where the weight of the parameters is automatically set by monitoring the regional and social importance of multiple topics. The values range between +100 and -100 where a positive score means an overall good ESG and negative means a downward trend in your ESG.\",\n      icon: \"Competitiveness\",\n      image: \"esgIndexLinechart\",\n      relatedWidgetIds: [\"esg sentiment\", \"esg distribution\"],\n    },\n    \"esg sentiment\": {\n      id: \"esg sentiment\",\n      name: \"Esg sentiment\",\n      description:\n        \"The ESG sentiment metric is an analysis of whether people have a positive, neutral or negative attitude towards your company divided in the ESG parameters.\",\n      icon: \"Reputation\",\n      image: \"esgSentimentLinechart\",\n      relatedWidgetIds: [\"esg index\", \"esg distribution\"],\n    },\n    \"esg distribution\": {\n      id: \"esg distribution\",\n      name: \"Esg distribution\",\n      description:\n        \"This framework looks at the esg parameters that drive the ESG for your company. The Graph shows what parameters that are the most talked-about online for your company’ in regards to your ESG.\",\n      icon: \"BusinessDrivers\",\n      image: \"esgDestributionWidget\",\n      relatedWidgetIds: [\"esg sentiment\", \"esg sentiment\"],\n    },\n\n    funnel: {\n      id: \"funnel\",\n      name: \"Funnel\",\n      description:\n        \"A marketing funnel describes your customer's journey with you. From the initial stages when someone learns about your business, to the purchasing stage, marketing funnels map routes to conversion.\",\n      icon: \"FunnelOverview\",\n      image: \"funnelHorizontal\",\n      relatedWidgetIds: [],\n    },\n  },\n};\n\nexport default widgets;\n","import { CSSProperties, useMemo } from \"react\";\nimport styles from \"./SubscriptionPlanTile.module.scss\";\nimport { formatToCurrency } from \"../../utils\";\nimport { SubscriptionPlan } from \"./subscriptionPlansSlice\";\nimport widgets from \"../widgets/widgets\";\n\ninterface Props extends SubscriptionPlan {\n  className?: string;\n  style?: CSSProperties;\n  status?: \"current\" | \"requested\";\n  clickHandler?: () => void;\n}\n\nexport const SubscriptionPlanTile = ({\n  className = \"\",\n  style,\n  name,\n  prices,\n  pricesBilledAnually,\n  searchesLimit,\n  dashboardsLimit,\n  marketsLimit,\n  company,\n  availableWidgets,\n  status,\n  clickHandler,\n}: Props) => {\n  const features = [\n    {\n      label: \"Monthly searches\",\n      value: searchesLimit,\n    },\n    {\n      label: \"Brand dashboards\",\n      value: dashboardsLimit,\n    },\n    {\n      label: \"Markets\",\n      value: marketsLimit,\n    },\n    {\n      label: \"Company members/admins\",\n      value: `${company.membersLimit}/${company.adminsLimit}`,\n    },\n  ];\n\n  const widgetNames = useMemo(() => {\n    return availableWidgets.reduce<string[]>((acc, widget) => {\n      const widgetName = widgets.entities[widget]?.name;\n\n      if (widgetName) {\n        acc.push(widgetName);\n      }\n\n      return acc;\n    }, []);\n  }, [availableWidgets]);\n\n  return (\n    <div\n      className={`${styles.subscriptionPlanTile} ${className}`}\n      style={style}\n    >\n      <div className={styles.name} title={name}>\n        {name}\n      </div>\n      <div\n        className={styles.price}\n        title={`${formatToCurrency(prices.gbp, \"gbp\")} (${formatToCurrency(\n          prices.sek,\n          \"sek\"\n        )}) / per month`}\n      >\n        <span>\n          {formatToCurrency(prices.gbp, \"gbp\")}\n          <span>{formatToCurrency(prices.sek, \"sek\")}</span>\n        </span>{\" \"}\n        <sub>/per month</sub>\n      </div>\n      <div\n        className={styles.priceBilledAnually}\n        title={`${formatToCurrency(\n          pricesBilledAnually.gbp,\n          \"gbp\"\n        )} (${formatToCurrency(\n          pricesBilledAnually.sek,\n          \"sek\"\n        )}) / per month billed annually`}\n      >\n        <span>\n          {formatToCurrency(pricesBilledAnually.gbp, \"gbp\")}\n          <span>{formatToCurrency(pricesBilledAnually.sek, \"sek\")}</span>\n        </span>{\" \"}\n        <sub>/per month billed annually</sub>\n      </div>\n      {features.map(({ label, value }, i) => (\n        <div className={styles.feature} key={i}>\n          <div>{label}</div>\n          <div>{value}</div>\n        </div>\n      ))}\n      <div className={styles.feature}>\n        <div>Included widgets</div>\n      </div>\n      <div className={styles.widgets}>\n        {widgetNames.map((widget) => (\n          <div className={styles.widget} title={widget} key={widget}>\n            - {widget}\n          </div>\n        ))}\n      </div>\n      <div className={styles.bottom}>\n        {status ? (\n          <div>\n            {\" \"}\n            <span style={{ textTransform: \"capitalize\" }}>{status}</span> plan\n          </div>\n        ) : (\n          clickHandler && (\n            <button className={styles.button} onClick={clickHandler}>\n              Choose this plan\n            </button>\n          )\n        )}\n      </div>\n    </div>\n  );\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"subscriptionPlanTile\":\"SubscriptionPlanTile_subscriptionPlanTile__2WL8t\",\"name\":\"SubscriptionPlanTile_name__1efq_\",\"price\":\"SubscriptionPlanTile_price__3SpPq\",\"priceBilledAnually\":\"SubscriptionPlanTile_priceBilledAnually__3YUYX\",\"feature\":\"SubscriptionPlanTile_feature__3iwE7\",\"widgets\":\"SubscriptionPlanTile_widgets__3kSK4\",\"widget\":\"SubscriptionPlanTile_widget__3DGZV\",\"bottom\":\"SubscriptionPlanTile_bottom__3F4Qk\",\"button\":\"SubscriptionPlanTile_button__3Ntp1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"subscriptionPlansPage\":\"SubscriptionPlansPage_subscriptionPlansPage__1hW9x\",\"title\":\"SubscriptionPlansPage_title__3XAZ7\",\"tiles\":\"SubscriptionPlansPage_tiles__3fVLc\",\"tile\":\"SubscriptionPlansPage_tile__1YyAh\",\"enterpriseTile\":\"SubscriptionPlansPage_enterpriseTile__3Hhwk\"};","import { useContext, useEffect, useRef } from \"react\";\nimport styles from \"./SubscriptionPlansPage.module.scss\";\nimport { SubscriptionPlanTile } from \"./SubscriptionPlanTile\";\nimport { Preloader } from \"../../components\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  selectAllSubscriptionPlans,\n  fetchAllSubscriptionPlans,\n} from \"./subscriptionPlansSlice\";\nimport context from \"../../context\";\nimport * as actions from \"../../store/actions\";\nimport { connect } from \"react-redux\";\nimport { notify } from \"react-notify-toast\";\n\ninterface Props {\n  isUserAdmin: boolean;\n  userSubscriptionPlanIds: Store.Company[\"subscriptionPlanIds\"];\n  requestCompanySubscriptionPlanUpgrade: typeof actions.requestCompanySubscriptionPlanUpgrade;\n}\n\nconst SubscriptionPlansPage = ({\n  isUserAdmin,\n  userSubscriptionPlanIds,\n  requestCompanySubscriptionPlanUpgrade,\n}: Props) => {\n  const { setIsGlobalPreloaderShown } = useContext(context);\n\n  const subscriptionPlansStatus = useSelector(\n    (state: RootState) => state.subscriptionPlans.status\n  );\n  const subscriptionPlans = useSelector(selectAllSubscriptionPlans);\n\n  const dispatch = useDispatch();\n\n  const isFirstLoading = useRef(true);\n\n  useEffect(() => {\n    if (\n      isFirstLoading.current &&\n      (subscriptionPlansStatus === \"idle\" ||\n        subscriptionPlansStatus === \"failed\")\n    ) {\n      isFirstLoading.current = false;\n      dispatch(fetchAllSubscriptionPlans());\n    }\n  }, [subscriptionPlansStatus, dispatch]);\n\n  async function handleClickSubscriptionPlan(id: string) {\n    if (!isUserAdmin) {\n      notify.show(\n        \"Please contact your company administrator in order to upgrade the current plan\",\n        \"warning\",\n        5000\n      );\n      return;\n    }\n\n    setIsGlobalPreloaderShown(true);\n    try {\n      await requestCompanySubscriptionPlanUpgrade(id);\n\n      notify.show(\n        \"Your contact person at My Telescope will soon be in touch with you\",\n        \"success\",\n        5000\n      );\n    } catch (error) {\n      console.dir(error);\n      notify.show(\"Oops, something went wrong\", \"error\");\n    }\n    setIsGlobalPreloaderShown(false);\n  }\n\n  if (\n    subscriptionPlansStatus === \"idle\" ||\n    subscriptionPlansStatus === \"loading\"\n  ) {\n    return <Preloader modifier=\"inner\" />;\n  }\n\n  return (\n    <div className={styles.subscriptionPlansPage}>\n      <div className={styles.title}>Plans and pricing</div>\n      <div className={styles.tiles}>\n        {subscriptionPlans.map((subscriptionPlan, i) => (\n          <SubscriptionPlanTile\n            className={styles.tile}\n            {...subscriptionPlan}\n            status={\n              subscriptionPlan.id === userSubscriptionPlanIds.current\n                ? \"current\"\n                : subscriptionPlan.id === userSubscriptionPlanIds.requested\n                ? \"requested\"\n                : undefined\n            }\n            clickHandler={() =>\n              handleClickSubscriptionPlan(subscriptionPlan.id)\n            }\n            key={i}\n          />\n        ))}\n      </div>\n      <div\n        className={styles.enterpriseTile}\n        onClick={() => handleClickSubscriptionPlan(\"enterprise\")}\n      >\n        <b>Enterprise:</b> A custom solution to fit the marketing needs of your\n        business (Contact us)\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ user, company }: Store.State) => ({\n  isUserAdmin: Boolean(\n    company.members.find(({ id }) => id === user.id)?.isAdmin\n  ),\n  userSubscriptionPlanIds: company.subscriptionPlanIds,\n});\n\nexport default connect(mapStateToProps, {\n  requestCompanySubscriptionPlanUpgrade:\n    actions.requestCompanySubscriptionPlanUpgrade,\n})(SubscriptionPlansPage);\n"],"sourceRoot":""}